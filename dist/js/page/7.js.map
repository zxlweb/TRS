{"version":3,"sources":["webpack:///./src/pages/cert/index.tsx","webpack:///./src/pages/cert/index.less?9956","webpack:///./src/pages/cert/index.less"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["/**\n * @fileOverview certificate page\n * @author Max\n */\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector, BaseComponent, HTMLManager } from 'razy/dist/lib';\nimport * as _expressStatic from 'express-serve-static-core';\nimport { GIFTS, GIFT_PREFIX, WECHAT_SHARE_OPTIONS } from '../../const'\nimport REQUEST from '../../const/request';\nimport { HIDE_MENU_LIST } from '../../utils/wechat-sdk-setup';\nimport * as querystring from 'query-string';\n\nconst style = require('./index.less');\nclass Certificate extends BaseComponent<{}, {\n    giftType: number,\n    shareVersion: boolean,\n    showShareTip: boolean\n}> {\n    async interceptor(req: _expressStatic.Request, res: _expressStatic.Response, next: _expressStatic.NextFunction): Promise<any> { }\n    setUpPage(manager: HTMLManager) { }\n    getInitDataActionImp(props: any) { }\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            giftType: 0,\n            shareVersion: false,\n            showShareTip: false\n        };\n    }\n    componentDidMount() {\n        super.componentDidMount();\n\n        const query = querystring.parse(location.search);\n        \n        if (_storage.get('openid') !== query.openid) {\n            this.setState({\n                shareVersion: true\n            });\n        }\n\n        _wechatSDKSetup();\n        wx.ready(() => {\n            const title = '我在『学而思西游集卡』活动中集齐了全套卡片！';\n            wx.onMenuShareTimeline({\n                title: title, // 分享标题\n                link: location.href, // 分享链接\n                imgUrl: WECHAT_SHARE_OPTIONS.imgUrl // 分享图标\n            });\n            wx.onMenuShareAppMessage({\n                title: title, // 分享标题\n                link: location.href, // 分享链接\n                imgUrl: WECHAT_SHARE_OPTIONS.imgUrl, // 分享图标\n                desc: ''\n            });\n            wx.hideMenuItems({\n                menuList: HIDE_MENU_LIST // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3\n            });\n        });\n\n        _http.setParam('token', query.openid);\n\n        _http.get(REQUEST.GET_COUPOM)\n            .then(data => {\n                const coupon = data.coupon[0];\n                this.setState({\n                    giftType: coupon.type\n                });\n            });\n    }\n    render() {\n        return (\n            <div>\n                <style dangerouslySetInnerHTML={{ __html: style }}></style>\n                <div id=\"page-cert\" style={{ height: this.state.bodyHeight < 649 ? 649 : this.state.bodyHeight, backgroundImage: `url(\"${ret(__IMAGE_STATIC_PATH__ + '/cert_bg.png')}\")` }}>\n                    <div id=\"intro-text\">\n                        我在『学而思西游集卡』活动中<br />\n                        成功集齐所有卡片\n                     </div>\n\n                    <div id=\"award-text\">\n                        获得『{GIFTS[this.state.giftType - 1] ? GIFTS[this.state.giftType - 1].title : ''}』一份\n                     </div>\n\n                    <img src={`${GIFT_PREFIX}/${this.state.giftType}.png`} alt=\"\" id=\"award-img\" />\n\n                    {this.state.shareVersion ?\n                        <img onClick={e => location.href=WECHAT_SHARE_OPTIONS.link} src={ret(`${__IMAGE_STATIC_PATH__}/cert_join_button.png`)} alt=\"\" id=\"action-button\" /> :\n                        <img onClick={e => this.setState({ showShareTip: true })} src={ret(`${__IMAGE_STATIC_PATH__}/cert_share_button.png`)} alt=\"\" id=\"action-button\" />}\n\n                    {this.state.showShareTip ?\n                        <div id=\"share-tip-section\" onClick={e => this.setState({ showShareTip: false })}>\n                            <img id=\"instruction\" src={ret(`${__IMAGE_STATIC_PATH__}/share_instruction.png`)} alt=\"\" />\n                        </div> : ''}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst selector = () => ({});\n\nexport = connect(selector)(Certificate);\n\n\n// WEBPACK FOOTER //\n// ./~/server-less-loader!./src/pages/cert/index.tsx","\n        var result = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/index.js!../../../node_modules/less-loader/index.js!../../../node_modules/xnl-less-base-import-loader/index.js!./index.less\");\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/cert/index.less\n// module id = 414\n// module chunks = 7","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#page-cert{padding-top:40%;background-size:cover;background-position:50%}#page-cert #intro-text{margin-bottom:30px;color:#ef7d3e;font-size:14rem;text-align:center;line-height:24px}#page-cert #award-text{margin-bottom:18px;color:#d65124;font-size:18rem;text-align:center;font-weight:700}#page-cert #award-img{display:block;width:40%;margin:auto;border:4px solid #f6e652}#page-cert #action-button{display:block;width:80%;margin:42px auto 0}#page-cert #share-tip-section{position:fixed;top:0;right:0;bottom:0;left:0;z-index:3000;background-color:rgba(0,0,0,.9)}#page-cert #share-tip-section #instruction{position:absolute;top:0;right:0;bottom:auto;left:auto;display:block;width:50%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader!./~/less-loader!./~/xnl-less-base-import-loader!./src/pages/cert/index.less\n// module id = 415\n// module chunks = 7"],"sourceRoot":""}