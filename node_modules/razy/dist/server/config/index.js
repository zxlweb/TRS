/**
 * @fileOverview Configuration management
 *               this file injects variables to global space
 * @author Max
 */
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs = require("fs");
var env = require("../utils/env-detect");
var path = require("path");
var utils_1 = require("./utils");
var DEV_CONF_PATH = path.join(process.cwd(), 'conf/dev.json');
var TEST_CONF_PATH = path.join(process.cwd(), 'conf/test.json');
var PROD_CONF_PATH = path.join(process.cwd(), 'conf/prod.json');
// read conf file
var vanillaConfigObj;
exports.vanillaConfigObj = vanillaConfigObj;
try {
    var filePath = void 0;
    if (env.prod())
        filePath = PROD_CONF_PATH;
    else if (env.test())
        filePath = TEST_CONF_PATH;
    else
        filePath = DEV_CONF_PATH;
    exports.vanillaConfigObj = vanillaConfigObj = JSON.parse(fs.readFileSync(filePath, { encoding: 'utf8' }));
}
catch (error) {
    console.error(error.stack);
    throw error;
}
// inject conf variables
utils_1.injectConfVariable(vanillaConfigObj);
